{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "description": "Structure for planning and tracking career interviews with validation and detailed exploration phases",
  "properties": {
    "career_data_id": {
      "type": "string",
      "description": "Foreign key reference to the id of the career data document"
    },
    "phase": {
      "type": "string",
      "description": "Current interview phase",
      "enum": [
        "validation",
        "exploration"
      ]
    },
    "validation_complete": {
      "type": "boolean",
      "description": "Indicates if initial data validation is complete and confirmed"
    },
    "topics": {
      "type": "array",
      "description": "List of career experience topics to explore",
      "items": {
        "type": "object",
        "required": [
          "id",
          "type",
          "reference",
          "threads"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for this topic"
          },
          "type": {
            "type": "string",
            "description": "Category of career experience",
            "enum": [
              "role",
              "education",
              "project",
              "skill_area",
              "certificates"
            ]
          },
          "reference": {
            "type": "object",
            "description": "Links to specific parts of the candidate's resume/CV",
            "properties": {
              "section": {
                "type": "string",
                "enum": [
                  "basics",
                  "work",
                  "education",
                  "projects",
                  "skills",
                  "certificates"
                ]
              },
              "identifier": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "startDate": {
                    "type": "string",
                    "pattern": "^[0-9]{4}-[0-9]{2}$"
                  }
                }
              }
            }
          },
          "threads": {
            "type": "array",
            "description": "Investigation threads for this topic",
            "items": {
              "type": "object",
              "required": [
                "id",
                "type",
                "focus",
                "status"
              ],
              "properties": {
                "id": {
                  "type": "string",
                  "description": "Unique identifier for this thread"
                },
                "type": {
                  "type": "string",
                  "enum": [
                    "validation",
                    "core_details",
                    "achievements",
                    "skills",
                    "team_context",
                    "challenges",
                    "transition",
                    "fill_gap"
                  ]
                },
                "focus": {
                  "type": "string",
                  "description": "Specific aspect this thread investigates"
                },
                "duration": {
                  "type": "integer",
                  "minimum": 1
                },
                "actual_duration": {
                  "type": "integer",
                  "minimum": 0
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "pending",
                    "in_progress",
                    "completed",
                    "skipped"
                  ]
                },
                "related_threads": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "description": "IDs of related threads"
                  }
                },
                "fields": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "description": "Specific fields to focus on"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "required": [
    "phase",
    "validation_complete",
    "topics"
  ]
}